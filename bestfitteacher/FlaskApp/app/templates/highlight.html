<!DOCTYPE html>
<html>
<head lang="en">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AdminLTE 2 | Dashboard</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css">
  <!-- jvectormap -->
  <link rel="stylesheet" href="bower_components/jvectormap/jquery-jvectormap.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

 <script src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
    <meta charset="UTF-8">
    <title></title>
    <style>
        .highlight {color: red; }
    </style>
    <style>
/*.mystyle {
    width: 100%;
    padding: 25px;
    background-color: coral;
    color: white;
    font-size: 25px;
    box-sizing: border-box;
}*/
.mystyle {
    background-color: coral;
    color: coral;
    box-sizing: border-box;
}
</style>
<script> var buttonumber= 0;</script>
<input type="text" name="TextBox" id="TextBox" value="0" />

    <script>
        
        function myFunc(id){
            var element = document.getElementById(id);
            
            //element.value='';
            //element.value = element.getAttribute('value');
            element.classList.toggle("mystyle");
   ///alert(id);     
}          //buttonumber=0;
        function highlight() {
                                var counter = $('#TextBox').val();
                    counter++ ;
                    $('#TextBox').val(counter);
            var text, sel, range;
            buttonumber= buttonumber+1;
            if (window.getSelection) {
                text = window.getSelection().toString();
                sel = window.getSelection();
                if (sel.rangeCount) {
              
                    range = sel.getRangeAt(0);
                    range.deleteContents();
                    if(text.length>0){
                    range.insertNode(range.createContextualFragment('<input class="mystyle" id= "buttonid'+ counter + '" type="button" value=" ' +text+ '"onClick="myFunc(this.id);"></input>'));

                }
//range.insertNode(range.createContextualFragment('<span class="highlight">'+text+'</span>'));
                }
            } else if (document.selection && document.selection.createRange) {
                text = document.selection.createRange().text;
                range = document.selection.createRange();
                 if(text.length>0){
                range.innerHTML = '<input class="mystyle" id= "buttonid'+ counter + '" type="button" value=" ' +text+'"onClick="myFunc(this.id);"></input>';
                 }//'<mark>'+text+'</mark>';//'<span class="highlight">'+text+'</span>';
            }
            
            range.collapse()
            //window.selection.empty();
            //range.deleteContents();
            //text="";
            //sel="";
            //window.getSelection=false;
        }
        document.onmouseup=highlight;
    </script>
</head>

<body>
<p>lorem ipsum donor kebab</p>
<button onclick="highlight()">Click me</button>
</body>
</html>
